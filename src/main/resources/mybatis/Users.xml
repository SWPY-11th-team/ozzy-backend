<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.ozzy.user.mapper.UserMapper">

    <select id="getNextUserSeq" resultType="int">
        SELECT OZZY.USER_SEQ.NEXTVAL FROM DUAL
    </select>

    <insert id="insertUser" parameterType="com.example.ozzy.user.dto.request.UserRequest">
        INSERT INTO OZZY.USERS
        (
            USER_SEQ
            ,PROVIDER
            ,EMAIL
            ,CREATE_AT
        ) VALUES (
             #{userSeq}
            ,#{provider}
            ,#{email}
            ,sysdate
        )
    </insert>

    <insert id="insertRefreshToken" parameterType="com.example.ozzy.user.dto.request.RefreshTokenRequest">
        INSERT INTO OZZY.REFRESH_TOKEN
            (REFRESH_TOKEN_SEQ, TOKEN, CREATE_AT, EXPIRED_AT, USER_SEQ)
        VALUES(OZZY.REFRESH_TOKEN_SEQ.NEXTVAL, #{token}, sysdate, #{expiredAt}, #{userSeq})
    </insert>

</mapper>